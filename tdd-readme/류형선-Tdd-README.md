## TDD 학습 과정 정리
Delivery 컨텍스트 개발을 맡으며 TDD(Test-Driven Development) 방식을 적용했다.
초기에는 domain → service → repository → controller → integration 순으로 TDD를 적용할 계획이었으나,
개발 속도의 한계로 인해 domain과 service까지만 TDD로 진행하고,
이후 단계는 DTD 방식으로 전환했다.

개발은 TDD의 핵심 사이클인 Red → Green → Refactor 단계를 반복하며 진행했다.


Red 단계에서는 사전에 작성한 컨텍스트 맵과 각 컨텍스트의 역할·책임 문서를 기반으로
domain에서는 엔티티와 VO의 유효성 검증,
service에서는 각 기능의 책임을 검증하는 테스트를 작성할 수 있었다.

Green 단계에서는 최소한의 구현만 요구되었기 때문에 빠르게 개발할 수 있었으나,
최소 요구 사항만 먼저 개발하는 방법에 익숙하지 않아서 리팩토링 단계와의 경계가 모호해지는 문제가 있었다.
또한 리팩토링 과정에서 로직 변경이 발생하면 테스트 코드 역시 수정해야 하는 경우가 있었는데,
이는 테스트 코드의 설계 부족에서 비롯된 문제라고 느꼈다.

## 각 Step별 학습 내용과 느낀 점

1. Red 단계 (실패하는 테스트 작성)
- 기능 구현 전 정리한 문서를 바탕으로 테스트 코드를 먼저 정의하는 단계이다.
- 예를 하나 들어, 배송 상태가 waiting -> in_progress -> delivered 순서로만 변경 가능한 테스트 코드를 작성했다.
- 작성하고 보니 기능을 막연히 코딩하기 보다, 기능의 올바른 기준을 미리 정의한다는 느낌으로 다가와 방향이 명확해졌던 것 같다.

2. Green 단계 (테스트 통과를 위한 최소한의 구현)
- 테스트를 통과시키기 위해 단순하게 코드를 작성하는 단계이다.
- 완벽한 코드보다 통과를 목표로 단순하게 작성하는 과정이 낯설었다.
- 그래서 refactor 단계와 혼용하며 작성했던게 아쉬운 것 같다.
- 요구사항만 충족시킨다는 생각으로 개발한다면 개발 속도가 훨씬 빨라질 것 같다는 생각이 들었다.

3. Refactor 단계 (리팩토링)
- 단순한 코드에서 중복 코드, 도메인 메서드 분리 등의 작업을 수행하는 단계이다.
- 테스트가 기준이 되기 때문에 무엇이 잘못되었는지 쉽게 파악 가능한 점이 좋았다.
- 리팩토링 후에도 테스트가 통과하기도 했지만, 구조가 크게 변경되는 코드들은 테스트 코드도 변경해야하는 일이 생겼다.
- 테스트 코드 작성 전 설계가 부족해서 구조가 변경되다는 생각이 들었고, 다음엔 더 신경써서 설계 해보려고 한다.

## 테스트 전략 설명
- 단위 테스트를 중심으로 작성했다.
- given - when - then 패턴으로 테스트 가독성을 유지했다.
- 의도적인 실패 테스트 작성으로 오류 상황을 먼저 정의하고, 예외 메세지를 검증했다.
- 잘못된 입력이나 순서에도 예외가 발생하는지 확인했다.

## 회고
이번 프로젝트를 통해 테스트 코드의 중요성과 역할을 체감할 수 있었다.
테스트 코드를 처음 작성하다 보니 익숙하지 않고 속도도 느렸지만,
점차 테스트가 개발의 가이드라인이자 어찌보면 또 다른 문서 역할을 한다는 점이 인상 깊었다.

처음엔 domain과 service 전체를 한 번에 진행했지만,
API 단위로 domain → service → repository → controller를 순차적으로 TDD로 진행했다면
더 자연스럽게 적응할 수 있었을 것 같다는 아쉬움이 있다.

또한 Green과 Refactor 단계를 명확히 구분하지 못했던 점이 아쉬웠다.
앞으로는 테스트를 명확한 기준점으로 두고,
각 단계를 구분해 효율적인 TDD 사이클을 경험해보고 싶다.