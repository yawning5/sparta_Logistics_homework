## TDD 학습 과정 정리
Order 서비스에서 주문 생성을 위한 Order 도메인, Order Repository, Order Controller에 대해서 TDD를 적용해봤습니다.
테스트 코드 클래스는 다음과 같습니다.
- `Ordertest` - domain
- `OrderRepositoryCoustomimplTest` - Repository
- `CreateOrderRequestTest` - Controller

## 각 Step별 학습 내용과 느낀 점

### Step1.
- 도메인에 대하여 TDD를 수행했을 때, 주문 도메인에 대한 예외나 비즈니스적인 제약사항을 한 번 더 생각해보면서, 도메인에 대해 조금 더 이해할 수 있었던 것 같습니다. 
- 예를 들어 납품 기한의 경우 단순히 아무 시간으로 지정되면 안 되며, 기획자와의 소통을 통해 확실하게 정의해야겠다는 생각이 들었습니다.

### Step2.
- 상태 전이를 바탕으로 주문 생성을 개발하다 보니 TDD를 수행하기에는 너무 부담이 되어 TDD를 적용하지 않았습니다. 
- 나중에 시간이 된다면 주문 상태 전이를 TDD를 수행하면서 어떤 예외 상황이 있는지, 어떻게 예외를 분리해야하는지 등을 명확하게 구분해내는 과정을 해보고 싶습니다. 
- 설계와 TDD를 수행하지 않고 주문 생성을 상태 전이로 구현하다 보니 많이 어려움을 겪은 것 같습니다. 

### Step3.
- 리포지토리 테스트의 경우, TDD를 통해 누락된 코드를 바로 알 수 있었고 이를 코드에 바로 반영할 수 있어 좋았습니다. 
- 예를 들어 특정 WHERE 절이 포함되지 않아 잘못된 데이터를 반환하는 것을 바로 테스트를 통해 바로 알아차리고 이를 즉시 반영할 수 있었던 것 같습니다.

### Step4.
- WebMvcTest를 통해 API 테스트를 진행했습니다. 
- API 테스트에서는 주로 입력으로 들어오는 데이터를 검증하는 과정을 수행했습니다. 
- 이를 통해 애너테이션 누락 값 Validation 테스트를 수행하여 애너테이션 혹은 데이터 누락 및 잘못된 타입 사용을 감지하고 이를 즉시 반영할 수 있었습니다.

- 통합 테스트 및 E2E 테스트는 아직 진행하지 못했습니다. 

## 테스트 전략 설명
### TDD 적용 과정
1. 해당 기능이 어떤 예외를 가질지 생각해본다.
    - 예를 들어 주문 삭제 시 입력으로 들어온 orderId에 해당하는 주문이 존재하는지, 어떤 상태에서 주문을 삭제할 수 있도록 할 것인지 등등
   
2. 생각한 예외들에 대해서 테스트 코드를 작성한다. (RED)
    - 각 예외가 발생했을 때의 테스트 코드를 작성한다.
    - 예외가 발생하면 어떤 예외가 발생하는지
    - 어떤 값을 반환하게 되는지 등등

3. 로직에서 예외가 발생하도록 작성하거나 더미 데이터를 반환하도록 한다. (Green)

4. 해당 기능에 대해 추가적으로 어떤 예외가 필요한지 찾아보고 이를 더미 데이터가 아닌 실제 로직으로 개선한다. (refactor)

## 회고
- 도메인, 리포지토리, API에 대한 TDD를 진행하는 것은 크게 어렵지 않았습니다. 오히려 도메인, 쿼리, API 파라미터 등에 대해 조금 더 생각해볼 수 있는 시간이어서 좋았던 것 같습니다.
- 또한 테스트를 통해서 즉시 잘못된 부분을 반영할 수 있었던 것이 가장 좋았던 것 같습니다. 
- 한 가지 아쉬운 점은 주문 생성 로직을 구현할 때 TDD를 이용해 같이 구현했으면 좋았을 것 같다는 생각이 들었습니다.
- 주문 생성 상태 전이에 대해 설계하지 않고 바로 개발에 뛰어들어 어려움이 있었고, 테스트 코드도 없었기에 변경할 때마다 문제가 없는지 검증하는 것이 매우 힘들었습니다.
- 또한 TDD를 진행하지 않았기 때문에 도메인에 대한 이해가 너무 부족했고 새로운 개념이 나올 때마다 수정해야 했습니다.
- 동일한 혹은 비슷한 작업(상태 전이)을 수행할 때는 상태 설계와 TDD를 통해 견고하게 코드를 작성해야겠다는 생각이 들었습니다. 

