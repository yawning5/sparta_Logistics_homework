## TDD 학습 과정 정리
VENDOR 프로젝트의 VENDOR CREATE API를 대상으로 TDD(Test-Driven Development) 방식을 적용해 보았습니다.
테스트 코드는 Domain, DomainService, Controller, Service 계층에 대해서만 작성했습니다.

사실, 처음부터 완전히 TDD로 개발한 것은 아니었습니다.
초기에는 비즈니스 코드를 먼저 작성하고, 이후에 테스트 코드를 작성, 그 다음에 비즈니스 코드를 수정하는 과정을 거쳤습니다.
즉, TDD의 정석적인 순서인 Red-Green-Refactor는 아니었지만, 그 과정을 간접적으로 경험할 수 있었습니다.

평소에도 “TDD를 해야 한다”는 필요성은 알고 있었지만,
막상 실무에서는 “시간이 너무 오래 걸린다”는 이유로 적용을 미뤄왔습니다.
또한 TDD를 시도할 때, 테스트 코드 작성 → 비즈니스 코드 구현 → 테스트 코드 수정을 반복하는 과정이
무의미한 반복처럼 느껴졌고, “이게 맞는 방향일까?” 하는 의문이 들었습니다.

하지만 이번 학습을 통해 이 반복 과정이 바로 Red-Green-Refactor 사이클임을 이해했고,
TDD가 단순히 테스트를 위한 개발 방식이 아니라 안정적인 설계와 점진적 개선을 위한 개발 철학이라는 점을 체감했습니다.

## 각 Step별 학습 내용과 느낀 점

1. Red 단계 (실패하는 테스트 작성)

기능을 구현하기 전에 “무엇을 해야 하는가”를 명확히 정의하기 위해
요구사항을 테스트 코드로 표현했습니다.

처음에는 “실패하는 테스트를 작성한다”는 개념이 낯설었지만,
이 단계에서 테스트를 먼저 작성하니 기능의 목표가 명확해지고, 불필요한 구현을 방지할 수 있었습니다.

특히, VENDOR 생성 시 입력값 검증을 테스트로 먼저 정의하면서
요구사항이 구체적으로 정리되는 경험을 했습니다.

2. Green 단계 (테스트 통과를 위한 최소한의 구현)

테스트를 통과시키기 위해 가장 단순한 구현만 작성했습니다.

이 과정에서 “처음부터 완벽하게 짜려고 하지 말자”는 TDD의 철학을 이해하게 되었고,
작은 단위로 기능을 완성시키면서 개발 속도보다 방향성에 집중할 수 있었습니다.

3. Refactor 단계 (리팩토링)

모든 테스트가 통과한 이후,
없는 변수명 개선, 메서드 분리 등을 진행했습니다.

테스트가 안정망처럼 작동해주었기 때문에,
코드 구조를 마음 놓고 개선할 수 있었습니다.

이전에는 리팩토링 시 기능이 깨질까 걱정됐는데,
테스트가 있으니 훨씬 심리적 안정감이 컸습니다

## 테스트 전략 설명

테스트 대상 계층
- Domain: 핵심 비즈니스 규칙 검증 (예: Vendor 생성 조건)
- DomainService: 도메인 권한별 검증
- Service: 트랜잭션 단위 로직 및 비즈니스 플로우 검증
- Controller: 요청/응답 구조 테스트

테스트 도구 및 접근 방식

- Assertions와 Mock을 활용하여 단위 테스트 중심으로 진행했습니다.
- 외부 의존성을 최소화하기 위해 등록되는 Bean은 모두 Mock 처리했습니다.
- 테스트 이름은 시나리오별로 명확히 구분했습니다.
  - createVendor() : 기본 생성 성공 케이스
  - createVendorHub() : 허브 권한으로 생성 성공
  - createVendorCompanyForbidden() : Company 권한에서 Forbidden 응답

지금 보니까 `패턴: [메서드명]_[상황]_[기대결과]` 형식으로 작성했다면 더 좋았을 것 같습니다.

테스트 작성 기준
- 하나의 테스트는 하나의 시나리오만 검증하게 했습니다.
- 예외 상황과 정상 상황을 명확히 분리했습니다.
- 비즈니스 로직의 변경에 따라 테스트가 자주 깨지는 경우, 해당 테스트가 너무 구체적인 구현에 의존하고 있음을 인식하고 개선했습니다.
